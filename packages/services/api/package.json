{
  "name": "@chiffre/api",
  "version": "0.0.1",
  "main": "dist/main.js",
  "private": true,
  "license": "UNLICENSED",
  "scripts": {
    "clean": "rm -rf ./coverage ./dist ./node_modules",
    "dev": "nodemon -e ts,.env -w .env -w ./src ./src/main.ts",
    "build": "run-s build:self build:types build:exports build:index",
    "build:self": "tsc",
    "build:types": "cp -rf ../../lib/api-types/dist/* ./dist/",
    "build:exports": "cp -rf ./dist/exports/* ../../lib/api-types/dist/exports/",
    "build:index": "cp -rf ./dist/index.js ../../lib/api-types/dist/",
    "knex": "ts-node -r dotenv/config ./node_modules/.bin/knex",
    "migrate:make": "yarn knex migrate:make",
    "migrate:up": "yarn knex migrate:up",
    "migrate:down": "yarn knex migrate:down",
    "migrate:latest": "yarn knex migrate:latest",
    "seed:make": "yarn knex seed:make",
    "seed:run": "yarn knex seed:run",
    "db:setup": "run-s migrate:latest seed:run",
    "db:new-key": "cloak generate",
    "decloak": "echo $(pbpaste) | cloak decrypt",
    "test": "jest --testPathIgnorePatterns=e2e --colors",
    "e2e:setup": "../../../scripts/e2e-start.sh",
    "e2e:teardown": "../../../scripts/e2e-stop.sh",
    "e2e:run": "jest e2e --runInBand --coverage --colors",
    "e2e:test": "run-s e2e:setup e2e:run e2e:teardown",
    "task:rotateCloak": "node ./dist/tasks/rotateCloak.js"
  },
  "dependencies": {
    "@47ng/check-env": "^2.0.0",
    "@47ng/cloak": "^0.15.0",
    "@47ng/codec": "^0.4.0",
    "@chiffre/crypto-client": "^0.0.1",
    "@chiffre/push": "^1.2.1",
    "@sentry/node": "^5.11.1",
    "base32-decode": "^1.0.0",
    "base32-encode": "^1.1.1",
    "dotenv": "^8.2.0",
    "env-alias": "^1.0.0",
    "fastify": "^2.11.0",
    "fastify-cookie": "^3.4.1",
    "fastify-cors": "^3.0.1",
    "fastify-graceful-shutdown": "^2.0.1",
    "fastify-micro": "^0.2.0",
    "fastify-plugin": "^1.6.0",
    "fastify-rate-limit": "^3.0.1",
    "fastify-sensible": "^2.1.1",
    "fastify-swagger": "^2.5.0",
    "fluent-schema": "^0.9.0",
    "ioredis": "^4.14.1",
    "jsonwebtoken": "^8.5.1",
    "knex": "^0.20.6",
    "nanoid": "^2.1.9",
    "otplib": "^12.0.1",
    "pg": "^7.17.0",
    "read-pkg": "^5.2.0",
    "redact-env": "^0.2.0",
    "sonic-boom": "^0.7.6",
    "under-pressure": "^3.2.1"
  },
  "devDependencies": {
    "@chiffre/analytics-core": "^0.0.1",
    "@chiffre/push": "^1.0.5",
    "@types/ioredis": "^4.14.4",
    "@types/jsonwebtoken": "^8.3.6",
    "@types/nanoid": "^2.1.0",
    "@types/pino": "^5.15.1",
    "@types/pino-http": "^4.3.2",
    "autocannon": "^4.4.2",
    "nodemon": "^2.0.2"
  },
  "jest": {
    "preset": "ts-jest/presets/js-with-ts",
    "testEnvironment": "node",
    "verbose": true
  },
  "nodemonConfig": {
    "verbose": false,
    "execMap": {
      "ts": "ts-node"
    },
    "ignore": [
      "dist",
      ".db"
    ]
  }
}
